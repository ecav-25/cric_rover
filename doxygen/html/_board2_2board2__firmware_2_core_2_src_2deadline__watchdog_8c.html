<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C.R.I.C. Rover: C:/Users/erric/git/cric_rover/Board2/board2_firmware/Core/Src/deadline_watchdog.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C.R.I.C. Rover
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_board2_2board2__firmware_2_core_2_src_2deadline__watchdog_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">deadline_watchdog.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementazione del driver Deadline Watchdog per il monitoraggio real-time.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;deadline_watchdog.h&quot;</code><br />
<code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;task.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af11ba856d3efa6e33f6a16d49424377f" id="r_af11ba856d3efa6e33f6a16d49424377f"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#af11ba856d3efa6e33f6a16d49424377f">DWD_Init</a> (<a class="el" href="struct_deadline___watchdog__t.html">Deadline_Watchdog_t</a> *hwd, <a class="el" href="struct_t_i_m___handle_type_def.html">TIM_HandleTypeDef</a> *htim, uint32_t target_mask, DWD_Callback_t callback)</td></tr>
<tr class="memdesc:af11ba856d3efa6e33f6a16d49424377f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inizializza il Deadline Watchdog e avvia il timer di monitoraggio.  <br /></td></tr>
<tr class="memitem:a4e7c2c2790e054259d0e16057b1cc8e2" id="r_a4e7c2c2790e054259d0e16057b1cc8e2"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#a4e7c2c2790e054259d0e16057b1cc8e2">DWD_Notify</a> (<a class="el" href="struct_deadline___watchdog__t.html">Deadline_Watchdog_t</a> *hwd, uint32_t flag)</td></tr>
<tr class="memdesc:a4e7c2c2790e054259d0e16057b1cc8e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifica al watchdog che un task ha completato il suo ciclo.  <br /></td></tr>
<tr class="memitem:a8f33830623c28fdd26126b2f5b42469a" id="r_a8f33830623c28fdd26126b2f5b42469a"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#a8f33830623c28fdd26126b2f5b42469a">DWD_CheckStatus</a> (<a class="el" href="struct_deadline___watchdog__t.html">Deadline_Watchdog_t</a> *hwd, const <a class="el" href="struct_t_i_m___handle_type_def.html">TIM_HandleTypeDef</a> *htim_irq)</td></tr>
<tr class="memdesc:a8f33830623c28fdd26126b2f5b42469a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifica se l'interrupt del timer corrisponde al watchdog e gestisce il timeout.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementazione del driver Deadline Watchdog per il monitoraggio real-time. </p>
<dl class="section author"><dt>Author</dt><dd>Gruppo 2</dd></dl>
<p>Questo modulo utilizza un timer hardware per garantire che un insieme di task completi la propria esecuzione entro una finestra temporale definita. Utilizza le primitive di FreeRTOS per proteggere l'accesso concorrente allo stato interno.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2026 Gruppo 2. Rilasciato sotto licenza GPLv3 (consultare il file LICENSE per i dettagli). </dd></dl>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a8f33830623c28fdd26126b2f5b42469a" name="a8f33830623c28fdd26126b2f5b42469a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f33830623c28fdd26126b2f5b42469a">&#9670;&#160;</a></span>DWD_CheckStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DWD_CheckStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_deadline___watchdog__t.html">Deadline_Watchdog_t</a> *</td>          <td class="paramname"><span class="paramname"><em>hwd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_t_i_m___handle_type_def.html">TIM_HandleTypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>htim_irq</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifica se l'interrupt del timer corrisponde al watchdog e gestisce il timeout. </p>
<p>Gestisce l'interrupt del timer per verificare la scadenza.</p>
<p>Gestisce l'interrupt del timer. Da chiamare in HAL_TIM_PeriodElapsedCallback.</p>
<dl class="section note"><dt>Note</dt><dd>Da chiamare all'interno della callback HAL <span class="tt"><a class="el" href="_board1_2board1__firmware_2_core_2_src_2main_8c.html#a8a3b0ad512a6e6c6157440b68d395eac" title="Period elapsed callback in non blocking mode.">HAL_TIM_PeriodElapsedCallback</a></span>. Se questa funzione viene eseguita per il timer associato, significa che la deadline è stata violata. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hwd</td><td>Puntatore all'istanza del watchdog. </td></tr>
    <tr><td class="paramname">htim_irq</td><td>Handle del timer che ha generato l'interrupt. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af11ba856d3efa6e33f6a16d49424377f" name="af11ba856d3efa6e33f6a16d49424377f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af11ba856d3efa6e33f6a16d49424377f">&#9670;&#160;</a></span>DWD_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DWD_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_deadline___watchdog__t.html">Deadline_Watchdog_t</a> *</td>          <td class="paramname"><span class="paramname"><em>hwd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t_i_m___handle_type_def.html">TIM_HandleTypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>htim</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>target_mask</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DWD_Callback_t</td>          <td class="paramname"><span class="paramname"><em>callback</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inizializza il Deadline Watchdog e avvia il timer di monitoraggio. </p>
<p>Inizializza e avvia il Deadline Watchdog.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hwd</td><td>Puntatore all'istanza della struttura <a class="el" href="struct_deadline___watchdog__t.html" title="Struttura &quot;Oggetto&quot; del Deadline Watchdog.">Deadline_Watchdog_t</a>. </td></tr>
    <tr><td class="paramname">htim</td><td>Puntatore all'handle del timer hardware. </td></tr>
    <tr><td class="paramname">target_mask</td><td>Maschera di bit che rappresenta l'insieme dei task da monitorare. </td></tr>
    <tr><td class="paramname">callback</td><td>Funzione da invocare in caso di violazione della deadline. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4e7c2c2790e054259d0e16057b1cc8e2" name="a4e7c2c2790e054259d0e16057b1cc8e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e7c2c2790e054259d0e16057b1cc8e2">&#9670;&#160;</a></span>DWD_Notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DWD_Notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_deadline___watchdog__t.html">Deadline_Watchdog_t</a> *</td>          <td class="paramname"><span class="paramname"><em>hwd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flag</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notifica al watchdog che un task ha completato il suo ciclo. </p>
<p>Notifica al watchdog che una specifica parte del sistema (task) è viva.</p>
<p>Notifica al watchdog che una specifica parte del sistema è viva.</p>
<p>Questa funzione è thread-safe: utilizza una sezione critica per aggiornare la maschera corrente. Se tutti i task previsti (target_mask) hanno notificato,il timer hardware viene resettato </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hwd</td><td>Puntatore all'istanza del watchdog. </td></tr>
    <tr><td class="paramname">flag</td><td>Bitmask univoca del task chiamante. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Board2</b></li><li class="navelem"><b>board2_firmware</b></li><li class="navelem"><b>Core</b></li><li class="navelem"><b>Src</b></li><li class="navelem"><a href="_board2_2board2__firmware_2_core_2_src_2deadline__watchdog_8c.html">deadline_watchdog.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
